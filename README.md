# Monitoring Scripts
Bash-скрипты для мониторинга состояния ОС, файловой системы, логов nginx.<br>

## Docker
Возможна сборка контейнера со скриптами с помощью докер-файла, если на вашей системе не работает какой-либо функционал скриптов:<br>
`docker build -t test_image .`<br>
`docker run --name test_container -it test_image`<br>
Скрипты, описанные далее, можно вызывать как из корня проекта на вашем устройстве, так и из запущенного контейнера.

## Monitoring OS
### Запуск
`./monitoringOS.sh`<br>
Скрипт выводит на экран информацию в виде:<br>
```
HOSTNAME = сетевое имя
TIMEZONE = временная зона
USER = текущий пользователь, который запустил скрипт
OS = тип и версия операционной системы
DATE = текущее время в виде: 12 May 2020 12:24:36
UPTIME = время работы системы
UPTIME_SEC = время работы системы в секундах
IP = ip-адрес машины
MASK = сетевая маска в виде: xxx.xxx.xxx.xxx
GATEWAY = ip шлюза по умолчанию
RAM_TOTAL = размер оперативной памяти в Гб
RAM_USED = размер используемой памяти в Гб
RAM_FREE = размер свободной памяти в Гб
SPACE_ROOT = размер рутового раздела в Mб
SPACE_ROOT_USED = размер занятого пространства рутового раздела в Mб
SPACE_ROOT_FREE = размер рутового раздела в Mб
```

## Monitoring FileSystem
### Запуск
`./monitoringFileSystem.sh /path/to/directory/`<br>
Путь может быть относительным или абсолютным, но должен заканчиваться на слэш.<br>
Скрипт выводит следующую информацию о каталоге, указанном в параметре:
- Общее число папок, включая вложенные
- Топ 5 папок с самым большим весом в порядке убывания (путь и размер)
- Общее число файлов
- Число конфигурационных файлов (с расширением .conf), текстовых файлов, исполняемых файлов, логов (файлов с расширением .log), архивов, символических ссылок
- Топ 10 файлов с самым большим весом в порядке убывания (путь, размер и тип)
- Топ 10 исполняемых файлов с самым большим весом в порядке убывания (путь, размер и хеш)

## Monitoring Combined Logs
### Запуск
`./monitoringCombinedLogs.sh [option] [files...]`<br>
`option` - параметр, принимающий значение в диапазоне 1-4, где:
- 1 - Все записи, отсортированные по коду ответа
- 2 - Все уникальные IP, встречающиеся в записях
- 3 - Все запросы с ошибками (код ответа - 4хх или 5хх)
- 4 - Все уникальные IP, которые встречаются среди ошибочных запросов

`files` - файлы логов nginx в combined формате<br>
Примеры логов можно найти в папке `test_combined_logs`
